<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>ws</title>
    <script>
        window.onload = function () {
            var indexI=0,indexY=0
            window.addEventListener('click', function (e) {
                    indexI = e.clientX
                    indexY = e.clientY                
            })

            function init() {
                window.requestAnimationFrame(animation)
            }
            function animation() {
                if (indexI>1000) return
                var canvas = document.getElementById('canvas')
                if (canvas.getContext && indexI<1000) {
                    var contex = canvas.getContext('2d')
                    contex.clearRect(0,0,1000,800)
                    // 绘制矩形
                    contex.fillStyle = 'red'
                    contex.fillRect(indexI,indexY,10,10)                    
                    indexI++
                    indexY++
                }
                
                window.requestAnimationFrame(animation) // 关键点在这里
            }
            init()
        }
    </script>
</head>
<body>
    <canvas id="canvas" width="1000" height="800" style="position: absolute; top: 0; left: 0;border: 1px solid #cdcdcd"></canvas>
</body>
</html>