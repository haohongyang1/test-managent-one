<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>myself this and new implements</title>
  </head>

  <body></body>

  <script type="text/javascript">
    // new operator simulation
    function objectFactory() {
      let obj = new Object(),
        Constructor = [].shift.call(arguments); // 在示例中是Person
      obj.__proto__ = Constructor.prototype; // 原型copy
      Constructor.apply(obj, arguments); // 改变this指向
      return obj;
    }

    // test
    function Person(name) {
      this.name = name;
    }
    Person.prototype.getName = function () {
      return this.name;
    };

    // new p1
    let p1 = objectFactory(Person, "paName");
    console.log(p1.name);
  </script>
</html>
